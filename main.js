(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();const O=navigator.userAgent.indexOf("ndroid")>-1,g=[{element:document.querySelector(".form-container"),buttonText:"Confirm"},{element:document.querySelector(".acknowledgement-container"),buttonText:"Continue"}],l={FADE_IN_DOWN:"fade-in-down",FADE_OUT_UP:"fade-out-up"},d={REQUIRED:"Can't be blank",NUMBER:"Wrong format, numbers only",CARD:"Wrong format, must be valid credit card number",DATE:"Wrong format, valid future date only",CVC:"Wrong format, must be valid CVC"},N="touched",V=document.querySelector(".view-number"),w=document.querySelector(".view-name"),L=document.querySelector(".view-exp-month"),_=document.querySelector(".view-exp-year"),U=document.querySelector(".view-cvc"),x=document.getElementById("input-name"),m=document.getElementById("input-number"),f=document.getElementById("input-exp-month"),h=document.getElementById("input-exp-year"),I=document.getElementById("input-cvc"),i=document.querySelector(".button-action"),q=Array.from([m,x,f,h,I]),S=Array.from([{view:V,input:m},{view:w,input:x},{view:L,input:f},{view:_,input:h},{view:U,input:I}]),y=document.querySelectorAll('.form-container input:not([disabled]):not([type="hidden"])'),R=e=>{e.input.value="",delete e.input.dataset.touched,v(e.input),e.input.id==="input-number"?p(e.view,e.input.value,u):p(e.view,e.input.value)},D=()=>{S.forEach(e=>{R(e)})},v=e=>{delete e.dataset.state;const t=e.parentElement.querySelectorAll('[data-state="has-error"]');t.length===0?T(e,""):Array.from(t).forEach(n=>{E(n)&&v(n)})},T=(e,t)=>{e.parentElement.querySelector(".error-message").innerText=t},p=(e,t,n)=>{let s=n?n(""):"";if(t===""&&e.dataset.placeholder)s=n?n(e.dataset.placeholder):e.dataset.placeholder;else if(e.dataset.padLength){const a=e.dataset.padDirection&&e.dataset.padDirection==="right";n?s=n(a?t.padEnd(+e.dataset.padLength,"0"):t.padStart(+e.dataset.padLength,"0")):s=a?t.padEnd(+e.dataset.padLength,"0"):t.padStart(+e.dataset.padLength,"0")}else s=t;e.innerText=s},F=()=>{let e=!0;return q.some(t=>E(t)?!1:(e=!1,!0)),e},E=e=>{let t=!0,n="";const s=e.value,a=e.dataset.validationSchema?JSON.parse(e.dataset.validationSchema):[];switch(e.dataset.touched||(e.dataset.touched=N),!0){case(e.required&&s===""):n=d.REQUIRED;break;case(a.includes("number")&&!s.match(/^[0-9]+$/)):n=d.NUMBER;break;case(a.includes("card")&&!s.match(/^[0-9]{4}(?: [0-9]{4}){3}$/)):n=d.CARD;break;case(a.includes("month")&&!s.match(/^(?:1[0-2]|0[1-9])$/)):case(a.includes("year")&&!s.match(/^[0-9]{2}$/)):case(a.some(r=>["month","year"].includes(r))&&f.dataset.touched&&h.dataset.touched&&!Y(+f.value,+h.value)):n=d.DATE;break;case(a.includes("cvc")&&!s.match(/^[0-9]{3}$/)):n=d.CVC;break;default:t=!1;break}return t&&(e.dataset.state="has-error",T(e,n)),!t},M=e=>{e.dataset.touched||(e.dataset.touched=N),E(e)&&v(e)},$=(e,t,n)=>{const s=t.selectionEnd,a=t.value;t.value=k(t),t.dataset.touched&&E(t)&&v(t),t.id==="input-number"?(H(t,e,s,a),p(n,t.value,u)):p(n,t.value),G(t.selectionEnd,+n.dataset.padLength)},B=async e=>{if(e.animationName===l.FADE_OUT_UP){const n=e.target,s=g.find(o=>o.element!==n),[a,r]=[s.element,s.buttonText];n.dataset.state="is-hidden",i.dataset.state="is-hidden",await W(500),delete n.dataset.animated,i.textContent=r,delete a.dataset.state,delete i.dataset.state,a.dataset.animated=l.FADE_IN_DOWN,i.dataset.animated=l.FADE_IN_DOWN}},P=()=>{S.filter(t=>t.input.type!=="hidden").forEach(t=>{t.input.addEventListener("blur",n=>{const s=n.target;M(s)}),t.input.addEventListener("input",n=>{var r,o;const s=n.target,a=(r=t.view)!=null?r:void 0;$((o=n.data)!=null?o:"",s,a)})}),i.addEventListener("click",t=>{const n=g.find(a=>!a.element.dataset.state||a.element.dataset.state!=="is-hidden"),s=t.target;n.element.classList.contains("form-container")?F()&&b(n.element,s):(D(),b(n.element,s))}),g.forEach(t=>{t.element.addEventListener("animationend",async n=>{B(n)})})},b=(e,t)=>{e.dataset.animated=l.FADE_OUT_UP,t.dataset.animated=l.FADE_OUT_UP},W=e=>new Promise(t=>setTimeout(t,e)),k=e=>{let t=e.value;switch(!0){case e.id==="input-number":O?setTimeout(()=>{t=u(e.value),m.value=c(e.value)}):(t=u(e.value),m.value=c(e.value));break;case e.id==="input-exp-month":t=Q(e.value);break;case e.id==="input-exp-year":t=c(e.value);break;case e.id==="input-cvc":t=c(e.value);break}return t},Y=(e,t)=>{if(isNaN(e)||isNaN(t))return!1;const n=t+2e3,s=new Date(n,e,0).getTime(),a=new Date().getTime();return s>=a},u=e=>c(e).replace(/^(.{16}).*$/,"$1").replace(/(.{4})/g,"$1 ").trim(),Q=e=>c(e).replace(/^([2-9])$/,"0$1"),c=e=>e.replace(/[^0-9]/g,""),G=(e,t)=>{if(document.activeElement&&e>=t){const n=Array.from(y).indexOf(document.activeElement),s=y[n+1];n>-1&&s&&s.focus()}},A=e=>{var t=e.match(/(\s+)/g);return t?t.length:0},H=(e,t,n,s)=>{if(n!==e.value.length){const a=t.replace(/[0-9 ]/g,""),r=s.substring(0,n),o=A(r),C=A(u(r));e.selectionEnd=n-a.length+(C-o)}};D(),P();
